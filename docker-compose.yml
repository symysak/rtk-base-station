version: '3'
services:
  str2str:
    image: ghcr.io/symysak/str2str:latest
    platform: linux/arm64
    container_name: str2str
    labels:
      - io.containers.autoupdate=image
    restart: unless-stopped
    devices:
      - /dev/ttyACM0:/dev/ttyACM0  # ZED-F9P
    network_mode: "host"
  ntrip-caster:
    image: ghcr.io/symysak/ntrip-caster:latest
    platform: linux/arm64
    container_name: ntrip-caster
    labels:
      - io.containers.autoupdate=image
    restart: unless-stopped
    network_mode: "host"
    command: /app/str2str -in tcpcli://localhost:2102#rtcm3 -out "${out_stream}/${mountpoint}:${mountpoint};rtcm3.3;${ntrip_msg};${carrer};GPS+GLO+GAL+BDS+QZS;Raspberry Pi;${country};${short_lat};${short_lon};0;0;github.com/symysak/rtk-base-station;NONE;${auth};N;;#rtcm3" -p ${lat} ${lon} ${hgt} -msg "${ntrip_msg}"
